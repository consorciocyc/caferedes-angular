<div class="row">
    <div class="col-12 table-min-heigth">
        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>Editar</th>
                    <th>Consec</th>
                    <th>Pedido</th>
                    <th>PQR</th>
                    <th>Fecha/Ingreso</th>
                    <th>Fecha/Limite</th>
                    <th>Tipo</th>
                    <th>Estado</th>
                    <th>Responsable/Pqr</th>
                    <th>Responsable/Gestion</th>
                </tr>
            </thead>
            <tbody>
                <tr class="item_actividad eliminar_tr" *ngFor="let table of table; let i=index">
                    <td>
                        <button class=" btn btn_success btn-sm mr-2 fa fa-edit" (click)="Edit($event)" 
                        value="{{table.idpqr}}">Editar
                    </button>
                    <button class="btn btn_delete  btn-sm mr-2 fa fa-trash-o" type="button" style="padding: 2px" value="{{table.idpqr}}"
                        (click)="delete($event)">

                    </button>
                    </td>
                    <td>
                        {{table.consec}}
                    </td>
                    <td>
                        {{table.admission_date}}
                    </td>
                    <td>
                        {{table.idpqr}}
                    </td>
                    <td>
                        {{table.admission_date}}
                    </td>
                    <td>
                        {{table.deadline}}
                    </td>

                    <td>
                        {{table.name_type_q}}
                    </td>
                    <td>
                        {{table.state_name}}
                    </td>
                    <td>
                        {{table.Responsable_pqr}}
                    </td>
                    <td>
                        {{table.Responsable_ges}}
                    </td>
                </tr>

            </tbody>
        </table>
    </div>
</div>

<div class="row">
    <form class="col-12">
        <div class="form-group row">
            <label class="col-1 col-form-label">Fecha/Ingreso</label>
            <div class="col-2">
                <input class="form-control input-modified" type="date" name="admission_date" #admission_date="ngModel" [(ngModel)]="pqr_model.admission_date">

            </div>
            <label class="col-1 col-form-label">Consecutivo</label>
            <div class="col-2">
                <input class="form-control input-modified" type="text" name="consec" [(ngModel)]="pqr_model.consec">
            </div>
            <label class="col-1 col-form-label">PQR EPM</label>
            <div class="col-2">
                <input class="form-control input-modified" type="text" name="pqr_epm" [(ngModel)]="pqr_model.pqr_epm">
            </div>
            <label class="col-1 col-form-label">Instalación</label>
            <div class="col-2">
                <input class="form-control input-modified" type="text" name="Installation" [(ngModel)]="pqr_model.Installation">
            </div>
        </div>

        <div class="form-group row">
            <label class="col-1 col-form-label">Cedula</label>
            <div class="col-2">
                <input class="form-control input-modified" type="text" name="identification" [(ngModel)]="pqr_model.identification">
            </div>
            <label class="col-1 col-form-label">Solicitante</label>
            <div class="col-2">
                <input class="form-control input-modified" type="text" name="applicant" [(ngModel)]="pqr_model.applicant">
            </div>
            <label class="col-1 col-form-label">Direccion</label>
            <div class="col-2">
                <input class="form-control input-modified" type="text" name="address" [(ngModel)]="pqr_model.address">
            </div>


        </div>

        <div class="form-group row">
            <label class="col-1 col-form-label">Fecha/Limite</label>
            <div class="col-2">
                <input class="form-control input-modified" type="date" name="deadline" [(ngModel)]="pqr_model.deadline">
            </div>
            <label class="col-1 col-form-label">Tipo</label>
            <div class="col-2">



                <select class="form-control input-modified" name="kind" [(ngModel)]="pqr_model.kind" #kind="ngModel" required>
                    <option *ngFor="let typequeja of typequeja" value="{{typequeja.id_type_queja}}">{{typequeja.name_type_q}}</option>
                </select>
                <span *ngIf="state.errors?.required && state.touched" class="error_message">el campo es requerido</span>
            </div>

            <label class="col-1 col-form-label">Tipo/Queja</label>
            <div class="col-2">


                <select class="form-control input-modified" name="type_complaint" [(ngModel)]="pqr_model.type_complaint" #type_complaint="ngModel"
                    (change)="reaso()" required>
                    <option *ngFor="let typepqr of typepqr" value="{{typepqr.idtype_pqr}}">{{typepqr.type_pqr_name}}</option>
                </select>
                <span *ngIf="type_complaint.errors?.required && type_complaint.touched" class="error_message">el campo es requerido</span>
            </div>

            <label class="col-1 col-form-label">Motivo/Queja</label>
            <div class="col-2">
                <select class="form-control input-modified" name="reason_pqr" [(ngModel)]="pqr_model.reason_pqr" #reason_pqr="ngModel" required>
                    <option *ngFor="let reasonpqr of reasonpqr" value="{{reasonpqr.idreason_pqr}}">{{reasonpqr.reason_name}}</option>
                </select>
                <span *ngIf="reason_pqr.errors?.required && reason_pqr.touched" class="error_message">el campo es requerido</span>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-1 col-form-label">Imputable</label>
            <div class="col-2">
                <input class="form-control input-modified" type="text" name="imputable" [(ngModel)]="pqr_model.imputable">
            </div>
            <label class="col-1 col-form-label">Estado</label>
            <div class="col-2">


                <select class="form-control input-modified" name="state" [(ngModel)]="pqr_model.state" #state="ngModel" required>
                    <option *ngFor="let state of states" value="{{state.id_state_pqr}}">{{state.state_name}}</option>
                </select>
                <span *ngIf="state.errors?.required && state.touched" class="error_message">el campo es requerido</span>

            </div>
            <label class="col-1 col-form-label">Origen/Queja</label>
            <div class="col-2">
                <select class="form-control input-modified" name="origin_complaint" [(ngModel)]="pqr_model.origin_complaint" #origin_complaint="ngModel"
                    required>
                    <option *ngFor="let origin of origin" value="{{origin.idorigin_pqr}}">{{origin.origin_name}}</option>
                </select>
                <span *ngIf="origin_complaint.errors?.required && origin_complaint.touched" class="error_message">el campo es requerido</span>
            </div>
            <label class="col-1 col-form-label">Responsable/PQR</label>
            <div class="col-2">
                <input class="form-control input-modified " ngui-auto-complete (change)="Responsablepqr()" [(ngModel)]="pqr_model.Responsable_pqr"
                    [source]="Searchemployee" list-formatter="full_name" path-to-data="employee" value-property-name="idemployees"
                    display-property-name="full_name" min-chars="1" name="Responsable_pqr" #Responsable_pqr="ngModel" />
            </div>
        </div>

        <div class="form-group row">
            <label class="col-1 col-form-label">Obeservaciones</label>
            <div class="col-11">
                <textarea name="" id="" class="form-control input-modified textarea-modified" name="observations" [(ngModel)]="pqr_model.observations"></textarea>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-1 col-form-label">Responsable Atención</label>
            <div class="col-2">


                <input class="form-control input-modified " ngui-auto-complete (change)="Responsableat()" [(ngModel)]="pqr_model.Responsable_at"
                    [source]="Searchemployee" list-formatter="full_name" path-to-data="employee" value-property-name="idemployees"
                    display-property-name="full_name" min-chars="1" name="Responsable_at" #Responsable_at="ngModel" />
            </div>
            <label class="col-1 col-form-label">Responsable Gestion</label>
            <div class="col-2">



                <input class="form-control input-modified " ngui-auto-complete (change)="Responsableges()" [(ngModel)]="pqr_model.Responsable_ges"
                    [source]="Searchemployee" list-formatter="full_name" path-to-data="employee" value-property-name="idemployees"
                    display-property-name="full_name" min-chars="1" name="Responsable_ges" #Responsable_ges="ngModel" />
            </div>


        </div>



        <div class="form-group row">

            <label class="col-1 col-form-label">Fecha/Atencion</label>
            <div class="col-2">
                <input class="form-control input-modified" type="date" name="date_attention" [(ngModel)]="pqr_model.date_attention">
            </div>


        </div>
        <div class="form-group row">
            <label class="col-1 col-form-label">Respuesta</label>
            <div class="col-11">
                <textarea name="" id="" class="form-control input-modified textarea-modified" name="answer" [(ngModel)]="pqr_model.answer"></textarea>
            </div>
        </div>

        <button class="btn btn_primary btn-sm mr-3 my-3" data-toggle="modal" data-target="#save" [disabled]="btninsert">Guardar</button>
        <button class="btn btn_primary btn-sm mr-3 my-3" data-toggle="modal" data-target="#update" [disabled]="btnupdate">Actualizar</button>
        <button class=" btn btn_success btn-sm mr-3 my-3 " (click)="newpqr()">
            Nueva
        </button>

    </form>
</div>


<div class="modal fade" id="save" tabindex="-1" role="dialog" aria-labelledby="save" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Guardar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row">
                        <p class="text-center text-muted p-3">Esta seguro Guardar La Queja ?</p>
                    </div>
                </form>
            </div>
            <div class=" modal-footer">
                <button type="button" class="btn btn_danger btn-sm" data-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn_success btn-sm" data-dismiss="modal" (click)="save()">Guardar</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="update" tabindex="-1" role="dialog" aria-labelledby="update" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Atualizar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row">
                        <p class="text-center text-muted p-3">Esta seguro Atualizar La Queja ?</p>
                    </div>
                </form>
            </div>
            <div class=" modal-footer">
                <button type="button" class="btn btn_danger btn-sm" data-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn_success btn-sm" (click)="update()" data-dismiss="modal">Atualizar</button>
            </div>
        </div>
    </div>
</div>